sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{defineGraficoCategorias:async function(e,t){try{let a=sap.ui.core.Element.registry.filter(function(e){return e.isA("sap.m.FlexBox")&&e.getId().includes("categoryFatura")});if(Array.isArray(a)){a.forEach(e=>{e.setBusy(true);e.removeAllItems()})}setTimeout(async function(){if(e){this.oFaturaController=e;this.oBindingContext=t}if(!this.oFaturaController){return}if(this.oFaturaController.getView().getModel("ui").getData().isEditable==false){if(!this.oBindingContext?.requestObject){return}let e=await this.oBindingContext.requestObject(this.oBindingContext.getPath());if(!e.ID){do{await this.oFaturaController.wait();e=await this.oBindingContext.requestObject(this.oBindingContext.getPath())}while(!e.ID)}let t=function(e,t){let a=sap.ui.core.Element.registry.filter(function(t){return t.isA("sap.m.FlexBox")&&t.getId().includes(`${e}`)});if(a.length>0){if(t?.Categorias){a=a[0];const e=[];t.Categorias.forEach(a=>{const o=a.TotalCategoria||0;const i=a.Porcentagem;const n=new sap.m.GenericTile({id:`Fatura::${a.ID}::${crypto.randomUUID()}`,headerImage:a.Imagem,header:a.Nome,subheader:`${o} ${t.Moeda}`,frameType:"OneByOne",tileContent:new sap.m.TileContent({footer:`Gasto: ${i.toFixed(2)}%`,content:new sap.suite.ui.microchart.RadialMicroChart({size:"Responsive",percentage:i,valueColor:i>20?"Error":"Good",alignContent:"Center"})})});e.push(n)});a.removeAllItems();if(e.length==0){a.addItem(new sap.m.Label({text:"Não há categorias com gastos nesse Mês"}))}else{e.forEach((t,o)=>{a.addItem(t);if(o<e.length-1){a.addItem(new sap.m.Label({text:"  --  "}))}})}a.setBusy(false)}else{a[0].removeAllItems();a[0].addItem(new sap.m.Label({text:"Não há categorias com gastos nesse Mês"}))}}}.bind(this);let a=this.oFaturaController.base.getExtensionAPI(),o=a.getModel(),i="recuperaCategorias",n=o.bindContext(`/${i}(...)`);n.setParameter("fatura",e.ID);await n.execute();const r=n.getBoundContext().getValue();t("categoryFatura",r)}}.bind(this),2e3)}catch(e){console.log("Erro:"+e)}}}});
//# sourceMappingURL=AnaliseCategoriaFatura.js.map