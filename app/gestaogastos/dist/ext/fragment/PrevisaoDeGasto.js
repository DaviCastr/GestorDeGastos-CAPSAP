sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";return{onInit:function(e){console.log(e)},"onBuscarSimulação":function(e){let t=this.getModel();var o=()=>new Promise((e,t)=>{let o=this.byId("ListaAno").getSelectedItem().getText();let s=this.byId("ListaMes").getSelectedItem().getText();const n={pessoa:this.getBindingContext().getObject().ID,mes:s,ano:o};try{fetch("/Gerenciamento",{method:"GET",headers:{"X-CSRF-Token":"Fetch"}}).then(function(e){if(!e.ok){throw new Error("Erro ao obter CSRF Token")}return e}.bind(this)).then(function(e){const t=e.headers.get("X-CSRF-Token");return t}.bind(this)).then(function(o){fetch("/Gerenciamento/simulaPorMesAno",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-Token":o},body:JSON.stringify(n)}).then(async function(t){console.log(t);let o=await t.json();let s=this.byId("TotalDoMes");let n=this.byId("TotalDeGastos");let a=this.byId("ValorAEconomizar");s.setNumber(o.TotalDoMes);s.setUnit(o.Moeda_code);n.setNumber(o.TotalDeGastos);n.setUnit(o.Moeda_code);a.setNumber(o.ValorAEconomizar);a.setUnit(o.Moeda_code);e()}.bind(this)).catch(function(e){sap.m.MessageToast.show("Erro ao chamar serviço: "+e);t()})}.bind(this)).catch(function(e){sap.m.MessageToast.show("Erro ao obter csrf token: "+e);t()})}catch(e){sap.m.MessageToast.show("Erro ao chamar serviço: "+e.message)}});let s={busy:{set:true,check:true},dataloss:{popup:true,navigation:false}};this.editFlow.securedExecution(o,s).finally(e=>{console.log(e)})}}});
//# sourceMappingURL=PrevisaoDeGasto.js.map