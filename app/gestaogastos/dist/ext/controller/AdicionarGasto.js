sap.ui.define(["sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(e,t){"use strict";return{adicionarGasto:function(o){try{const o=this.editFlow.getView();const a=o.getModel();var s=function(){return new Promise(function(s,n){try{fetch(`${a.getServiceUrl()}Currencies`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(async function(e){console.log(e);let a=await e.json();const n=new t(a.value.flat());o.setModel(n,"Moedas");s()}.bind(this)).catch(function(e){sap.m.MessageToast.show("Erro ao chamar serviço de Moedas: "+e);n()});const i={Pessoa_ID:this.getBindingContext().getObject().ID};fetch(`${a.getServiceUrl()}Cartao?$filter=Pessoa_ID eq ${i.Pessoa_ID}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(async function(a){console.log(a);let n=await a.json();let i;if(Array.isArray(n.value))i=n.value;else i=[n.value];const c=new t(i);o.setModel(c,"Cartoes");if(!this.pDialog){this.pDialog=e.load({id:o.getId(),name:"apps.dflc.gestaogastos.ext.fragment.AdicionarGasto"}).then(function(e){o.addDependent(e);return e})}this.pDialog.then(function(e){e.open()});s()}.bind(this)).catch(function(e){sap.m.MessageToast.show("Erro ao chamar serviço: "+e);n()})}catch(e){sap.m.MessageToast.show("Erro ao chamar serviço: "+e.message)}}.bind(this))}.bind(this);let n={busy:{set:true,check:true},dataloss:{popup:true,navigation:false}};this.editFlow.securedExecution(s,n).finally(e=>{console.log(e)})}catch(e){sap.m.MessageToast.show("Erro:"+e)}}}});
//# sourceMappingURL=AdicionarGasto.js.map