sap.ui.define(["sap/m/MessageToast","sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(e,t,o){"use strict";return{adicionarGasto:function(e){const a=this.editFlow.getView();const s=a.getModel();var n=()=>new Promise((e,s)=>{try{fetch(`/Gerenciamento/Currencies`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(async function(t){console.log(t);let s=await t.json();const n=new o(s.value.flat());a.setModel(n,"Moedas");e()}.bind(this)).catch(function(e){sap.m.MessageToast.show("Erro ao chamar serviço de Moedas: "+e);s()});const n={Pessoa_ID:this.getBindingContext().getObject().ID};fetch(`/Gerenciamento/Cartao?$filter=Pessoa_ID eq ${n.Pessoa_ID}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(async function(s){console.log(s);let n=await s.json();let i;if(Array.isArray(n.value))i=n.value;else i=[n.value];const c=new o(i);a.setModel(c,"Cartoes");if(!this.pDialog){this.pDialog=t.load({id:a.getId(),name:"apps.dflc.gestaogastos.ext.fragment.AdicionarGasto"}).then(function(e){a.addDependent(e);return e})}this.pDialog.then(function(e){e.open()});e()}.bind(this)).catch(function(e){sap.m.MessageToast.show("Erro ao chamar serviço: "+e);s()})}catch(e){sap.m.MessageToast.show("Erro ao chamar serviço: "+e.message)}});let i={busy:{set:true,check:true},dataloss:{popup:true,navigation:false}};this.editFlow.securedExecution(n,i).finally(e=>{console.log(e)})}}});
//# sourceMappingURL=AdicionarGasto.js.map